<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ubuntu Terminal Web</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css">
  <style>
    html, body { height: 100%; margin: 0; display: flex; flex-direction: column; background-color: #1e1e1e; color: #fff; font-family: 'Ubuntu', sans-serif; }
    .login-container { text-align: center; padding: 40px 50px; background: url('https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_1801,h_954/https://assets.ubuntu.com/v1/622b4fe1-numpy-numbat-on-dell-xps-13.jpg') center/cover; box-shadow: 0 0 20px rgba(0, 0, 0, 0.6); width: 300px; margin: 50px auto; border-radius: 10px; }
    .login-container img { width: 100px; margin-bottom: 30px; }
    .login-container input, .login-container button { width: 100%; padding: 10px; margin: 10px 0; font-size: 16px; border-radius: 5px; }
    .login-container input { background: #fff; border: 1px solid #888; color: #333; }
    .login-container button { background-color: #E95420; color: white; border: none; cursor: pointer; }
    .login-container button:hover { background-color: #d44816; }
    .loading-message { color: yellow; font-size: 14px; display: none; }
    #terminal-container { flex-grow: 1; display: none; background: url('https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_1801,h_954/https://assets.ubuntu.com/v1/622b4fe1-numpy-numbat-on-dell-xps-13.jpg') center/cover; }
    .fullscreen, .fullscreen-btn, .exit-fullscreen-btn { position: fixed; top: 10px; right: 10px; padding: 10px; background-color: rgba(0, 0, 0, 0.5); color: white; border: none; border-radius: 5px; cursor: pointer; z-index: 1001; }
  </style>
</head>
<body>

  <div class="login-container" id="loginContainer">
    <img src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2022/03/ubuntu-logo.png" alt="Ubuntu Logo">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="login()">Login</button>
    <div class="loading-message" id="loadingMessage">Vui lòng đợi, đang kết nối đến SSH console...</div>
  </div>

  <div id="terminal-container"></div>

  <button class="fullscreen-btn" id="fullscreenBtn">Mở Fullscreen</button>
  <button class="exit-fullscreen-btn" id="exitFullscreenBtn" style="display:none;">Thoát Fullscreen</button>

  <script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/socket.io/client-dist/socket.io.js"></script>
  <script>
    const terminal = new Terminal({ rows: 30, cols: 80, scrollback: 500, theme: { background: '#282c34', foreground: '#fff' } });
    terminal.open(document.getElementById('terminal-container'));
    const socket = io();

    terminal.onData(data => socket.emit('input', data));
    socket.on('output', data => terminal.write(data));

    function login() {
      const username = document.getElementById('username').value, password = document.getElementById('password').value;
      const loadingMessage = document.getElementById('loadingMessage');
      loadingMessage.style.display = 'block';

      // Kiểm tra thông tin đăng nhập
      if (username === 'negan' && password === 'negan') simulateLoginProcess();
      else setTimeout(() => { loadingMessage.style.display = 'none'; alert('Thông tin đăng nhập không đúng!'); }, 3000);
    }

    function simulateLoginProcess() {
      const steps = [
        'Connecting to server Singapore SSH linuxuser@139.180.188.174 port 22...', 
        'Connection established Successfully.', 
        `Last login: ${new Date().toLocaleString('en-US', { timeZone: 'Asia/Ho_Chi_Minh' })}`
      ];
      const loadingMessage = document.getElementById('loadingMessage');
      
      let i = 0;
      loadingMessage.textContent = steps[i++];

      setTimeout(() => { loadingMessage.textContent = steps[i++]; }, 2000);
      setTimeout(() => { loadingMessage.textContent = steps[i++]; }, 4000);

      // Thêm dòng này để xóa terminal trước khi hiển thị
      setTimeout(() => {
        terminal.clear();  // Xóa sạch terminal
        terminal.write('');  // Đảm bảo không có dòng lệnh nào xuất hiện
        document.getElementById('loginContainer').style.display = 'none';
        document.getElementById('terminal-container').style.display = 'block';
        loadingMessage.style.display = 'none';
      }, 8000);
    }

    document.getElementById('fullscreenBtn').addEventListener('click', function() {
      document.getElementById('terminal-container').classList.add('fullscreen');
      this.style.display = 'none';
      document.getElementById('exitFullscreenBtn').style.display = 'block';
      document.getElementById('terminal-container').requestFullscreen?.() || document.getElementById('terminal-container').mozRequestFullScreen?.() || document.getElementById('terminal-container').webkitRequestFullscreen?.();
    });

    document.getElementById('exitFullscreenBtn').addEventListener('click', function() {
      document.exitFullscreen?.() || document.mozCancelFullScreen?.() || document.webkitExitFullscreen?.();
      document.getElementById('terminal-container').classList.remove('fullscreen');
      this.style.display = 'none';
      document.getElementById('fullscreenBtn').style.display = 'block';
    });
  </script>
</body>
</html>
